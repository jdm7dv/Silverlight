<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<title>Downloader smooth source setting</title>
<meta></meta>
</head>
<body>

<script type="text/javascript">

var switched = false;

function OnDownloadProgressChanged (sender)
{
	if (sender.DownloadProgress >= 1.0 && switched == false) {
		console.log ("Switching images...");
		sender.findName ("image1").Visibility = "Collapsed";
		sender.findName ("image2").Source = "http://farm4.static.flickr.com/3096/2671186252_c1a5ca42d5_b.jpg";
		sender.findName ("image2").Visibility = "Visible";
		switched = true;
	}
}

function OnMouseEnter (sender, eventArgs)
{
	sender.findName ("cache").addEventListener ("DownloadProgressChanged", OnDownloadProgressChanged);
	sender.findName ("cache").Source = "http://farm4.static.flickr.com/3096/2671186252_c1a5ca42d5_b.jpg";
}
</script>

<object type="application/x-silverlight" data="data:," id="slControl" width="640" height="480">
<param name="background" value="#FFFFFF"/>
<param name="source" value="#xamlContent"/>
</object>

<script type="text/xaml" id="xamlContent">
<?xml version="1.0"?>
<Canvas xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

	<Rectangle Canvas.Top="0" Canvas.Left="0" Width="640" Height="50" Fill="#ff0000" MouseEnter="OnMouseEnter" />
	<Rectangle Canvas.Top="50" Canvas.Left="0" Width="640" Height="430" Fill="#ff0000" />
	 <TextBlock Canvas.Top="20" Canvas.Left="200">Mouse here when 1st image loads</TextBlock>

        <Image x:Name="image2" Canvas.Left="0" Canvas.Top="50" Width="640" Height="430" Visibility="Collapsed" />
        <Image x:Name="image1" Canvas.Left="0" Canvas.Top="50" Width="640" Height="430" Source="http://farm4.static.flickr.com/3064/2671187678_f3e1f18f3e_b.jpg"/>
	<Image x:Name="cache" Canvas.Left="0" Canvas.Top="50" Width="640" Height="430" Visibility="Collapsed" />
</Canvas>
</script>

</body>
</html>
